<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devyatov Business - –ó–∞–¥–∞—á–Ω–∏–∫ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π</title>
    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* –®–∞–ø–∫–∞ */
        header {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            background-color: white;
            color: #1a1a1a;
            width: 50px;
            height: 50px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 800;
        }
        
        .logo-text h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }
        
        .logo-text p {
            color: #aaa;
            font-size: 14px;
        }
        
        .sync-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: #1a1a1a;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #333;
        }
        
        .btn-success {
            background-color: #4CAF50;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #45a049;
        }
        
        .btn-warning {
            background-color: #ff9800;
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #e68900;
        }
        
        .btn-danger {
            background-color: #f44336;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #da190b;
        }
        
        .btn-info {
            background-color: #2196F3;
            color: white;
        }
        
        .btn-info:hover {
            background-color: #0b7dda;
        }
        
        .btn-block {
            width: 100%;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .main-nav {
            background-color: white;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 30px;
        }
        
        .nav-tabs {
            display: flex;
            list-style: none;
            flex-wrap: wrap;
        }
        
        .nav-tab {
            padding: 18px 25px;
            cursor: pointer;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .nav-tab:hover {
            background-color: #f9f9f9;
        }
        
        .nav-tab.active {
            border-bottom-color: #1a1a1a;
            color: #1a1a1a;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 1200px) {
            .main-content {
                flex-direction: column;
            }
        }
        
        /* –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ */
        .left-panel {
            flex: 0 0 350px;
        }
        
        .panel-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .card-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            color: #1a1a1a;
        }
        
        /* –§–æ—Ä–º—ã */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 15px;
            transition: border 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.1);
        }
        
        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
        
        /* –°—Ñ–µ—Ä—ã */
        .spheres-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .sphere-tag {
            background-color: #f0f0f0;
            padding: 8px 15px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .sphere-tag:hover {
            background-color: #e0e0e0;
        }
        
        .sphere-tag.active {
            background-color: #4CAF50;
            color: white;
        }
        
        .sphere-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .sphere-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á */
        .center-panel {
            flex: 1;
        }
        
        .tasks-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .tasks-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .task-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #ddd;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .task-card.completed {
            opacity: 0.8;
            border-left-color: #4CAF50;
        }
        
        .task-card.high-priority {
            border-left-color: #f44336;
        }
        
        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }
        
        .task-title {
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .task-sphere {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .task-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .task-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        .task-responsible {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .responsible-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #555;
        }
        
        .task-actions {
            display: flex;
            gap: 10px;
        }
        
        .task-date {
            font-size: 13px;
            color: #888;
        }
        
        /* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ */
        .right-panel {
            flex: 0 0 350px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 800;
            color: #1a1a1a;
            margin: 10px 0;
        }
        
        .stat-label {
            font-size: 14px;
            color: #666;
        }
        
        .kpi-progress {
            height: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .kpi-progress-bar {
            height: 100%;
            background-color: #4CAF50;
            border-radius: 5px;
            transition: width 0.5s;
        }
        
        .chart-container {
            height: 200px;
            margin: 20px 0;
            display: flex;
            align-items: flex-end;
            gap: 10px;
        }
        
        .chart-bar {
            flex: 1;
            background-color: #4CAF50;
            border-radius: 4px 4px 0 0;
            position: relative;
            min-height: 10px;
        }
        
        .chart-label {
            text-align: center;
            font-size: 12px;
            margin-top: 5px;
            color: #666;
        }
        
        /* –í–∫–ª–∞–¥–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ */
        .sync-instructions {
            background-color: #e8f5e9;
            border-left: 4px solid #4CAF50;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 0 8px 8px 0;
        }
        
        .sync-instructions h3 {
            margin-bottom: 15px;
            color: #1a1a1a;
        }
        
        .sync-instructions ol {
            margin-left: 20px;
        }
        
        .sync-instructions li {
            margin-bottom: 10px;
        }
        
        .sync-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(150%);
            transition: transform 0.3s;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background-color: #f44336;
        }
        
        .notification.warning {
            background-color: #ff9800;
        }
        
        /* –ü–æ–¥–≤–∞–ª */
        footer {
            background-color: #1a1a1a;
            color: #aaa;
            padding: 30px 0;
            margin-top: 50px;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .footer-links {
            display: flex;
            gap: 20px;
        }
        
        .footer-links a {
            color: #aaa;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
            
            .sync-controls {
                width: 100%;
                justify-content: flex-start;
            }
            
            .nav-tabs {
                overflow-x: auto;
            }
            
            .tasks-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .task-footer {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .task-actions {
                width: 100%;
                justify-content: flex-start;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">DB</div>
                    <div class="logo-text">
                        <h1>Devyatov Business</h1>
                        <p>–ó–∞–¥–∞—á–Ω–∏–∫ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ —Ñ–∞–π–ª—ã</p>
                    </div>
                </div>
                <div class="sync-controls">
                    <button id="save-btn" class="btn btn-success">
                        <span>üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</span>
                    </button>
                    <button id="load-btn" class="btn btn-primary">
                        <span>üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</span>
                    </button>
                    <button id="export-btn" class="btn btn-warning">
                        <span>üìÑ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel</span>
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="main-nav">
        <div class="container">
            <ul class="nav-tabs">
                <li class="nav-tab active" data-tab="tasks">–ó–∞–¥–∞—á–∏</li>
                <li class="nav-tab" data-tab="spheres">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ñ–µ—Ä–∞–º–∏</li>
                <li class="nav-tab" data-tab="analytics">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</li>
                <li class="nav-tab" data-tab="sync">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</li>
            </ul>
        </div>
    </nav>
    
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="notification" class="notification">
        <span id="notification-text">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</span>
    </div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container">
        <!-- –í–∫–ª–∞–¥–∫–∞ –ó–∞–¥–∞—á–∏ -->
        <div id="tasks-tab" class="tab-content active">
            <div class="main-content">
                <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
                <div class="left-panel">
                    <div class="panel-card">
                        <h2 class="card-title">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h2>
                        <form id="task-form">
                            <div class="form-group">
                                <label class="form-label" for="task-title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                                <input type="text" id="task-title" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="task-description">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                                <textarea id="task-description" class="form-control" placeholder="–û–ø–∏—à–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏"></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="task-sphere">–°—Ñ–µ—Ä–∞</label>
                                    <select id="task-sphere" class="form-control" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ñ–µ—Ä—É</option>
                                        <!-- –°—Ñ–µ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="task-priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                                    <select id="task-priority" class="form-control">
                                        <option value="normal">–û–±—ã—á–Ω—ã–π</option>
                                        <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="task-responsible">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π</label>
                                    <input type="text" id="task-responsible" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="task-deadline">–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                                    <input type="date" id="task-deadline" class="form-control" required>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary btn-block">
                                <span>‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</span>
                            </button>
                        </form>
                    </div>
                    
                    <!-- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å—Ñ–µ—Ä–∞–º -->
                    <div class="panel-card">
                        <h2 class="card-title">–°—Ñ–µ—Ä—ã –∑–∞–¥–∞—á</h2>
                        <div class="spheres-container" id="spheres-container">
                            <!-- –°—Ñ–µ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
                
                <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
                <div class="center-panel">
                    <div class="tasks-header">
                        <h2 class="card-title">–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h2>
                        <div class="filters">
                            <select id="filter-sphere" class="form-control filter-select">
                                <option value="all">–í—Å–µ —Å—Ñ–µ—Ä—ã</option>
                                <!-- –°—Ñ–µ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </select>
                            <select id="filter-status" class="form-control filter-select">
                                <option value="all">–í—Å–µ –∑–∞–¥–∞—á–∏</option>
                                <option value="active">–¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ</option>
                                <option value="completed">–¢–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="tasks-container" id="tasks-container">
                        <!-- –ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        <div class="task-card empty-state">
                            <p style="text-align: center; color: #888; padding: 40px 20px;">
                                –ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É —Å –ø–æ–º–æ—â—å—é —Ñ–æ—Ä–º—ã —Å–ª–µ–≤–∞.
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
                <div class="right-panel">
                    <div class="panel-card">
                        <h2 class="card-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h2>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="total-tasks">0</div>
                                <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="completed-tasks">0</div>
                                <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="active-tasks">0</div>
                                <div class="stat-label">–í —Ä–∞–±–æ—Ç–µ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="completion-rate">0%</div>
                                <div class="stat-label">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                            </div>
                        </div>
                        
                        <div class="kpi-progress">
                            <div id="kpi-progress-bar" class="kpi-progress-bar" style="width: 0%"></div>
                        </div>
                        
                        <h3 style="margin-bottom: 15px;">–ó–∞–¥–∞—á–∏ –ø–æ —Å—Ñ–µ—Ä–∞–º</h3>
                        <div class="chart-container" id="chart-container">
                            <!-- –ì—Ä–∞—Ñ–∏–∫ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                    
                    <div class="panel-card">
                        <h2 class="card-title">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ</h2>
                        <div id="responsible-list">
                            <!-- –°–ø–∏—Å–æ–∫ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ñ–µ—Ä–∞–º–∏ -->
        <div id="spheres-tab" class="tab-content">
            <div class="main-content">
                <div class="panel-card" style="flex: 1;">
                    <h2 class="card-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ñ–µ—Ä–∞–º–∏</h2>
                    <p style="margin-bottom: 20px;">–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å—Ñ–µ—Ä—ã –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.</p>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="new-sphere-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã</label>
                            <input type="text" id="new-sphere-name" class="form-control" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="new-sphere-color">–¶–≤–µ—Ç —Å—Ñ–µ—Ä—ã</label>
                            <input type="color" id="new-sphere-color" class="form-control" value="#4CAF50" style="height: 46px; padding: 5px;">
                        </div>
                    </div>
                    
                    <div class="sphere-actions">
                        <button id="add-sphere-btn" class="btn btn-success">
                            <span>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å—Ñ–µ—Ä—É</span>
                        </button>
                        <button id="clear-spheres-btn" class="btn btn-danger">
                            <span>üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å—Ñ–µ—Ä—ã</span>
                        </button>
                    </div>
                    
                    <div class="spheres-container" id="spheres-management-container" style="margin-top: 30px;">
                        <!-- –°—Ñ–µ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
        <div id="analytics-tab" class="tab-content">
            <div class="main-content">
                <div class="panel-card" style="flex: 1;">
                    <h2 class="card-title">–ü–æ–¥—Ä–æ–±–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ KPI</h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 30px;">
                        <div>
                            <h3>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —Å—Ñ–µ—Ä–∞–º</h3>
                            <div id="sphere-efficiency-list">
                                <!-- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —Å—Ñ–µ—Ä–∞–º –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                        
                        <div>
                            <h3>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º</h3>
                            <div id="responsible-efficiency-list">
                                <!-- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 40px;">
                        <h3>–¢–µ–Ω–¥–µ–Ω—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á</h3>
                        <div id="trends-container" style="height: 200px; margin-top: 20px;">
                            <!-- –ì—Ä–∞—Ñ–∏–∫ —Ç–µ–Ω–¥–µ–Ω—Ü–∏–π –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è -->
        <div id="sync-tab" class="tab-content">
            <div class="sync-instructions">
                <h3>üìö –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö</h3>
                <ol>
                    <li><strong>–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ</strong> - –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ" –≤ —à–∞–ø–∫–µ, —á—Ç–æ–±—ã —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏</li>
                    <li><strong>–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–∞–π–ª</strong> –∫–æ–ª–ª–µ–≥–∞–º —á–µ—Ä–µ–∑ Telegram, email –∏–ª–∏ –ª—é–±–æ–π —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–±</li>
                    <li><strong>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ</strong> - –∫–æ–≥–¥–∞ –ø–æ–ª—É—á–∏—Ç–µ —Ñ–∞–π–ª –æ—Ç –∫–æ–ª–ª–µ–≥–∏, –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª</li>
                    <li><strong>–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel</strong> - –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤ –º–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ Excel-—Ñ–∞–π–ª</li>
                </ol>
            </div>
            
            <div class="panel-card">
                <h2 class="card-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h2>
                
                <div class="sync-actions">
                    <button id="backup-btn" class="btn btn-primary">
                        <span>üíæ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é</span>
                    </button>
                    <button id="restore-btn" class="btn btn-warning">
                        <span>üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏</span>
                    </button>
                    <button id="clear-all-btn" class="btn btn-danger">
                        <span>üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</span>
                    </button>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h3>
                    <div class="stats-grid" style="margin-top: 20px;">
                        <div class="stat-card">
                            <div class="stat-value" id="data-tasks-count">0</div>
                            <div class="stat-label">–ó–∞–¥–∞—á –≤ —Å–∏—Å—Ç–µ–º–µ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="data-spheres-count">0</div>
                            <div class="stat-label">–°—Ñ–µ—Ä –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="data-users-count">0</div>
                            <div class="stat-label">–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="data-last-update">-</div>
                            <div class="stat-label">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ü–æ–¥–≤–∞–ª -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div>
                    <p>Devyatov Business Workspace ‚Ä¢ –ó–∞–¥–∞—á–Ω–∏–∫ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ —Ñ–∞–π–ª—ã</p>
                    <p style="font-size: 14px; margin-top: 5px;">–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</p>
                </div>
                <div class="footer-links">
                    <a href="#" id="export-help">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —ç–∫—Å–ø–æ—Ä—Ç—É</a>
                    <a href="#" id="reset-data">–°–±—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</a>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- –°–∫—Ä—ã—Ç—ã–π input –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ -->
    <input type="file" id="file-input" accept=".json" style="display: none;">
    <input type="file" id="excel-input" accept=".xlsx,.xls" style="display: none;">
    
    <!-- JavaScript -->
    <script>
        // –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const DevyatovApp = {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            init() {
                console.log("Devyatov Business App –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");
                this.loadData();
                this.setupEventListeners();
                this.renderAll();
                this.showNotification("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!", "success");
            },
            
            // –î–∞–Ω–Ω—ã–µ
            data: {
                tasks: [],
                spheres: [
                    { id: 1, name: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥", color: "#4CAF50", tasks: 0, completed: 0 },
                    { id: 2, name: "–ü—Ä–æ–¥–∞–∂–∏", color: "#2196F3", tasks: 0, completed: 0 },
                    { id: 3, name: "–§–∏–Ω–∞–Ω—Å—ã", color: "#FF9800", tasks: 0, completed: 0 },
                    { id: 4, name: "–û–ø–µ—Ä–∞—Ü–∏–∏", color: "#9C27B0", tasks: 0, completed: 0 },
                    { id: 5, name: "IT", color: "#3F51B5", tasks: 0, completed: 0 },
                    { id: 6, name: "HR", color: "#00BCD4", tasks: 0, completed: 0 },
                    { id: 7, name: "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π", color: "#795548", tasks: 0, completed: 0 },
                    { id: 8, name: "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞", color: "#607D8B", tasks: 0, completed: 0 },
                    { id: 9, name: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞", color: "#FF5722", tasks: 0, completed: 0 },
                    { id: 10, name: "–î–∏–∑–∞–π–Ω", color: "#E91E63", tasks: 0, completed: 0 },
                    { id: 11, name: "–ö–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥", color: "#8BC34A", tasks: 0, completed: 0 }
                ],
                lastUpdate: new Date().toISOString()
            },
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
            loadData() {
                const savedData = localStorage.getItem('devyatovData');
                if (savedData) {
                    try {
                        const parsedData = JSON.parse(savedData);
                        this.data.tasks = parsedData.tasks || [];
                        this.data.spheres = parsedData.spheres || this.data.spheres;
                        this.data.lastUpdate = parsedData.lastUpdate || new Date().toISOString();
                        console.log("–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ localStorage");
                    } catch (e) {
                        console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:", e);
                    }
                }
            },
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
            saveData() {
                this.data.lastUpdate = new Date().toISOString();
                localStorage.setItem('devyatovData', JSON.stringify(this.data));
                console.log("–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage");
            },
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
            setupEventListeners() {
                // –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
                document.getElementById('task-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addTask();
                });
                
                // –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ñ–µ—Ä—ã
                document.getElementById('add-sphere-btn').addEventListener('click', () => {
                    this.addSphere();
                });
                
                // –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å—Ñ–µ—Ä
                document.getElementById('clear-spheres-btn').addEventListener('click', () => {
                    if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å—Ñ–µ—Ä—ã? –í—Å–µ –∑–∞–¥–∞—á–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è, –Ω–æ –±—É–¥—É—Ç –±–µ–∑ —Å—Ñ–µ—Ä—ã.")) {
                        this.data.spheres = [];
                        this.saveData();
                        this.renderAll();
                        this.showNotification("–í—Å–µ —Å—Ñ–µ—Ä—ã —É–¥–∞–ª–µ–Ω—ã", "warning");
                    }
                });
                
                // –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
                document.getElementById('save-btn').addEventListener('click', () => {
                    this.downloadData();
                });
                
                // –ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
                document.getElementById('load-btn').addEventListener('click', () => {
                    document.getElementById('file-input').click();
                });
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
                document.getElementById('file-input').addEventListener('change', (e) => {
                    this.uploadData(e.target.files[0]);
                });
                
                // –ö–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel
                document.getElementById('export-btn').addEventListener('click', () => {
                    this.exportToExcel();
                });
                
                // –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        const tabId = tab.getAttribute('data-tab');
                        this.switchTab(tabId);
                    });
                });
                
                // –§–∏–ª—å—Ç—Ä—ã –∑–∞–¥–∞—á
                document.getElementById('filter-sphere').addEventListener('change', () => {
                    this.renderTasks();
                });
                
                document.getElementById('filter-status').addEventListener('change', () => {
                    this.renderTasks();
                });
                
                // –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
                document.getElementById('backup-btn').addEventListener('click', () => {
                    this.downloadData(true);
                });
                
                // –ö–Ω–æ–ø–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
                document.getElementById('restore-btn').addEventListener('click', () => {
                    document.getElementById('file-input').click();
                });
                
                // –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
                document.getElementById('clear-all-btn').addEventListener('click', () => {
                    if (confirm("–í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –∑–∞–¥–∞—á–∏ –∏ —Å—Ñ–µ—Ä—ã. –í—ã —É–≤–µ—Ä–µ–Ω—ã?")) {
                        this.clearAllData();
                    }
                });
                
                // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —ç–∫—Å–ø–æ—Ä—Ç—É
                document.getElementById('export-help').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.switchTab('sync');
                    this.showNotification("–û—Ç–∫—Ä—ã—Ç–∞ –≤–∫–ª–∞–¥–∫–∞ '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è' —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π", "info");
                });
                
                // –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö
                document.getElementById('reset-data').addEventListener('click', (e) => {
                    e.preventDefault();
                    if (confirm("–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫ –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º?")) {
                        this.resetToDefault();
                    }
                });
            },
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
            switchTab(tabId) {
                // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                document.getElementById(`${tabId}-tab`).classList.add('active');
                
                // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–∫–ª–∞–¥–∫—É –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                document.querySelector(`.nav-tab[data-tab="${tabId}"]`).classList.add('active');
                
                // –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
                if (tabId === 'sync') {
                    this.updateSyncStats();
                }
            },
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
            addTask() {
                const title = document.getElementById('task-title').value.trim();
                const description = document.getElementById('task-description').value.trim();
                const sphereId = parseInt(document.getElementById('task-sphere').value);
                const priority = document.getElementById('task-priority').value;
                const responsible = document.getElementById('task-responsible').value.trim();
                const deadline = document.getElementById('task-deadline').value;
                
                if (!title || !sphereId || !responsible || !deadline) {
                    this.showNotification("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è", "error");
                    return;
                }
                
                const newTask = {
                    id: Date.now(),
                    title,
                    description,
                    sphereId,
                    priority,
                    responsible,
                    deadline,
                    completed: false,
                    createdAt: new Date().toISOString()
                };
                
                this.data.tasks.push(newTask);
                this.saveData();
                this.renderAll();
                this.showNotification(`–ó–∞–¥–∞—á–∞ "${title}" –¥–æ–±–∞–≤–ª–µ–Ω–∞`, "success");
                
                // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
                document.getElementById('task-form').reset();
                document.getElementById('task-deadline').valueAsDate = new Date();
            },
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ñ–µ—Ä—ã
            addSphere() {
                const name = document.getElementById('new-sphere-name').value.trim();
                const color = document.getElementById('new-sphere-color').value;
                
                if (!name) {
                    this.showNotification("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã", "error");
                    return;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç
                if (this.data.spheres.some(sphere => sphere.name.toLowerCase() === name.toLowerCase())) {
                    this.showNotification("–°—Ñ–µ—Ä–∞ —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç", "error");
                    return;
                }
                
                const newSphere = {
                    id: Date.now(),
                    name,
                    color,
                    tasks: 0,
                    completed: 0
                };
                
                this.data.spheres.push(newSphere);
                this.saveData();
                this.renderAll();
                this.showNotification(`–°—Ñ–µ—Ä–∞ "${name}" –¥–æ–±–∞–≤–ª–µ–Ω–∞`, "success");
                
                // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
                document.getElementById('new-sphere-name').value = '';
            },
            
            // –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ñ–µ—Ä—ã
            deleteSphere(sphereId) {
                if (confirm("–£–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å—Ñ–µ—Ä—É? –ó–∞–¥–∞—á–∏ –≤ —ç—Ç–æ–π —Å—Ñ–µ—Ä–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è, –Ω–æ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –±–µ–∑ —Å—Ñ–µ—Ä—ã.")) {
                    this.data.spheres = this.data.spheres.filter(sphere => sphere.id !== sphereId);
                    this.saveData();
                    this.renderAll();
                    this.showNotification("–°—Ñ–µ—Ä–∞ —É–¥–∞–ª–µ–Ω–∞", "warning");
                }
            },
            
            // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
            toggleTaskStatus(taskId) {
                const task = this.data.tasks.find(t => t.id === taskId);
                if (task) {
                    task.completed = !task.completed;
                    task.completedAt = task.completed ? new Date().toISOString() : null;
                    this.saveData();
                    this.renderAll();
                    this.showNotification(
                        task.completed ? `–ó–∞–¥–∞—á–∞ "${task.title}" –≤—ã–ø–æ–ª–Ω–µ–Ω–∞` : `–ó–∞–¥–∞—á–∞ "${task.title}" –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –≤ —Ä–∞–±–æ—Ç—É`,
                        task.completed ? "success" : "warning"
                    );
                }
            },
            
            // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
            deleteTask(taskId) {
                if (confirm("–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É?")) {
                    const taskIndex = this.data.tasks.findIndex(t => t.id === taskId);
                    if (taskIndex !== -1) {
                        const taskTitle = this.data.tasks[taskIndex].title;
                        this.data.tasks.splice(taskIndex, 1);
                        this.saveData();
                        this.renderAll();
                        this.showNotification(`–ó–∞–¥–∞—á–∞ "${taskTitle}" —É–¥–∞–ª–µ–Ω–∞`, "warning");
                    }
                }
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            updateStats() {
                const totalTasks = this.data.tasks.length;
                const completedTasks = this.data.tasks.filter(task => task.completed).length;
                const activeTasks = totalTasks - completedTasks;
                const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤ –≤ —à–∞–ø–∫–µ
                document.getElementById('total-tasks').textContent = totalTasks;
                document.getElementById('completed-tasks').textContent = completedTasks;
                document.getElementById('active-tasks').textContent = activeTasks;
                document.getElementById('completion-rate').textContent = `${completionRate}%`;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
                document.getElementById('kpi-progress-bar').style.width = `${completionRate}%`;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
                this.updateSyncStats();
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å—Ñ–µ—Ä–∞–º
                this.updateSphereStats();
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
                this.renderCharts();
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å—Ñ–µ—Ä
            updateSphereStats() {
                // –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–æ–≤ —Å—Ñ–µ—Ä
                this.data.spheres.forEach(sphere => {
                    sphere.tasks = 0;
                    sphere.completed = 0;
                });
                
                // –ü–æ–¥—Å—á–µ—Ç –∑–∞–¥–∞—á –ø–æ —Å—Ñ–µ—Ä–∞–º
                this.data.tasks.forEach(task => {
                    const sphere = this.data.spheres.find(s => s.id === task.sphereId);
                    if (sphere) {
                        sphere.tasks++;
                        if (task.completed) {
                            sphere.completed++;
                        }
                    }
                });
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
            updateSyncStats() {
                document.getElementById('data-tasks-count').textContent = this.data.tasks.length;
                document.getElementById('data-spheres-count').textContent = this.data.spheres.length;
                
                // –ü–æ–¥—Å—á–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö
                const responsibles = [...new Set(this.data.tasks.map(task => task.responsible))];
                document.getElementById('data-users-count').textContent = responsibles.length;
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                const lastUpdate = new Date(this.data.lastUpdate);
                const formattedDate = lastUpdate.toLocaleDateString('ru-RU', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                document.getElementById('data-last-update').textContent = formattedDate;
            },
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
            renderAll() {
                this.renderSpheres();
                this.renderTasks();
                this.updateStats();
                this.renderResponsibles();
                this.renderAnalytics();
            },
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ñ–µ—Ä
            renderSpheres() {
                const spheresContainer = document.getElementById('spheres-container');
                const spheresManagementContainer = document.getElementById('spheres-management-container');
                const taskSphereSelect = document.getElementById('task-sphere');
                const filterSphereSelect = document.getElementById('filter-sphere');
                
                // –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
                spheresContainer.innerHTML = '';
                spheresManagementContainer.innerHTML = '';
                
                // –û—á–∏—Å—Ç–∫–∞ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤
                taskSphereSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ñ–µ—Ä—É</option>';
                filterSphereSelect.innerHTML = '<option value="all">–í—Å–µ —Å—Ñ–µ—Ä—ã</option>';
                
                // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞–∂–¥–æ–π —Å—Ñ–µ—Ä—ã
                this.data.spheres.forEach(sphere => {
                    // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å—Ñ–µ—Ä—ã –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
                    const sphereElement = document.createElement('div');
                    sphereElement.className = 'sphere-tag';
                    sphereElement.style.backgroundColor = sphere.color + '20'; // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
                    sphereElement.style.border = `1px solid ${sphere.color}`;
                    sphereElement.innerHTML = `
                        <div class="sphere-color" style="background-color: ${sphere.color}"></div>
                        <span>${sphere.name}</span>
                        <span style="margin-left: auto; font-size: 12px;">${sphere.tasks}</span>
                    `;
                    sphereElement.addEventListener('click', () => {
                        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ñ–µ—Ä–µ
                        document.getElementById('filter-sphere').value = sphere.id;
                        this.renderTasks();
                    });
                    spheresContainer.appendChild(sphereElement);
                    
                    // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å—Ñ–µ—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                    const managementElement = document.createElement('div');
                    managementElement.className = 'sphere-tag';
                    managementElement.style.backgroundColor = sphere.color + '20';
                    managementElement.style.border = `1px solid ${sphere.color}`;
                    managementElement.innerHTML = `
                        <div class="sphere-color" style="background-color: ${sphere.color}"></div>
                        <span>${sphere.name}</span>
                        <span style="margin-left: auto; font-size: 12px;">${sphere.tasks} –∑–∞–¥–∞—á</span>
                        <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;" data-sphere-id="${sphere.id}">–£–¥–∞–ª–∏—Ç—å</button>
                    `;
                    
                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ñ–µ—Ä—ã
                    const deleteBtn = managementElement.querySelector('button');
                    deleteBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.deleteSphere(sphere.id);
                    });
                    
                    spheresManagementContainer.appendChild(managementElement);
                    
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏
                    const option1 = document.createElement('option');
                    option1.value = sphere.id;
                    option1.textContent = sphere.name;
                    taskSphereSelect.appendChild(option1);
                    
                    const option2 = document.createElement('option');
                    option2.value = sphere.id;
                    option2.textContent = sphere.name;
                    filterSphereSelect.appendChild(option2);
                });
            },
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∑–∞–¥–∞—á
            renderTasks() {
                const tasksContainer = document.getElementById('tasks-container');
                const filterSphere = document.getElementById('filter-sphere').value;
                const filterStatus = document.getElementById('filter-status').value;
                
                // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á
                let filteredTasks = this.data.tasks;
                
                if (filterSphere !== 'all') {
                    filteredTasks = filteredTasks.filter(task => task.sphereId === parseInt(filterSphere));
                }
                
                if (filterStatus === 'active') {
                    filteredTasks = filteredTasks.filter(task => !task.completed);
                } else if (filterStatus === 'completed') {
                    filteredTasks = filteredTasks.filter(task => task.completed);
                }
                
                // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∑–∞–¥–∞—á (—Å–Ω–∞—á–∞–ª–∞ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ, –ø–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ)
                filteredTasks.sort((a, b) => {
                    if (a.completed && !b.completed) return 1;
                    if (!a.completed && b.completed) return -1;
                    return new Date(b.createdAt) - new Date(a.createdAt);
                });
                
                // –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
                tasksContainer.innerHTML = '';
                
                if (filteredTasks.length === 0) {
                    const emptyState = document.createElement('div');
                    emptyState.className = 'task-card empty-state';
                    emptyState.innerHTML = `
                        <p style="text-align: center; color: #888; padding: 40px 20px;">
                            –ó–∞–¥–∞—á –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
                        </p>
                    `;
                    tasksContainer.appendChild(emptyState);
                    return;
                }
                
                // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
                filteredTasks.forEach(task => {
                    const sphere = this.data.spheres.find(s => s.id === task.sphereId);
                    const taskElement = document.createElement('div');
                    taskElement.className = `task-card ${task.completed ? 'completed' : ''} ${task.priority === 'high' ? 'high-priority' : ''}`;
                    
                    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
                    const deadline = new Date(task.deadline);
                    const formattedDeadline = deadline.toLocaleDateString('ru-RU', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric'
                    });
                    
                    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ —Å—Ñ–µ—Ä—ã
                    const sphereColor = sphere ? sphere.color : '#999';
                    const sphereName = sphere ? sphere.name : '–ë–µ–∑ —Å—Ñ–µ—Ä—ã';
                    
                    taskElement.innerHTML = `
                        <div class="task-header">
                            <div>
                                <div class="task-title">${task.title}</div>
                                <div class="task-sphere" style="background-color: ${sphereColor}20; color: ${sphereColor}; border: 1px solid ${sphereColor}">${sphereName}</div>
                            </div>
                            <div class="task-actions">
                                <button class="btn ${task.completed ? 'btn-warning' : 'btn-success'}" style="padding: 6px 12px;" data-task-id="${task.id}">
                                    ${task.completed ? '‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å' : '‚úì –í—ã–ø–æ–ª–Ω–∏—Ç—å'}
                                </button>
                                <button class="btn btn-danger" style="padding: 6px 12px;" data-task-id="${task.id}">üóëÔ∏è</button>
                            </div>
                        </div>
                        ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
                        <div class="task-footer">
                            <div class="task-responsible">
                                <div class="responsible-avatar">${task.responsible.charAt(0).toUpperCase()}</div>
                                <div>
                                    <div style="font-weight: 600;">${task.responsible}</div>
                                    <div class="task-date">–°—Ä–æ–∫: ${formattedDeadline}</div>
                                </div>
                            </div>
                            <div class="task-date">
                                ${task.completed ? `–í—ã–ø–æ–ª–Ω–µ–Ω–æ: ${new Date(task.completedAt).toLocaleDateString('ru-RU')}` : ''}
                            </div>
                        </div>
                    `;
                    
                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
                    const completeBtn = taskElement.querySelector(`button[data-task-id="${task.id}"]:not(.btn-danger)`);
                    const deleteBtn = taskElement.querySelector(`button.btn-danger[data-task-id="${task.id}"]`);
                    
                    completeBtn.addEventListener('click', () => {
                        this.toggleTaskStatus(task.id);
                    });
                    
                    deleteBtn.addEventListener('click', () => {
                        this.deleteTask(task.id);
                    });
                    
                    tasksContainer.appendChild(taskElement);
                });
            },
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö
            renderResponsibles() {
                const responsibleList = document.getElementById('responsible-list');
                responsibleList.innerHTML = '';
                
                // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∑–∞–¥–∞—á –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º
                const responsibleMap = {};
                this.data.tasks.forEach(task => {
                    if (!responsibleMap[task.responsible]) {
                        responsibleMap[task.responsible] = {
                            total: 0,
                            completed: 0
                        };
                    }
                    responsibleMap[task.responsible].total++;
                    if (task.completed) {
                        responsibleMap[task.responsible].completed++;
                    }
                });
                
                // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–¥–∞—á
                const sortedResponsibles = Object.entries(responsibleMap)
                    .sort((a, b) => b[1].total - a[1].total);
                
                // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
                sortedResponsibles.forEach(([name, stats]) => {
                    const completionRate = stats.total > 0 ? Math.round((stats.completed / stats.total) * 100) : 0;
                    
                    const item = document.createElement('div');
                    item.className = 'sphere-list-item';
                    item.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="responsible-avatar">${name.charAt(0).toUpperCase()}</div>
                            <div>
                                <div style="font-weight: 600;">${name}</div>
                                <div style="font-size: 12px; color: #888;">${stats.completed}/${stats.total} –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                            </div>
                        </div>
                        <div style="font-weight: 700; color: ${completionRate >= 80 ? '#4CAF50' : completionRate >= 50 ? '#FF9800' : '#f44336'}">
                            ${completionRate}%
                        </div>
                    `;
                    responsibleList.appendChild(item);
                });
            },
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≥—Ä–∞—Ñ–∏–∫–æ–≤
            renderCharts() {
                const chartContainer = document.getElementById('chart-container');
                chartContainer.innerHTML = '';
                
                // –§–∏–ª—å—Ç—Ä—É–µ–º —Å—Ñ–µ—Ä—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –∑–∞–¥–∞—á–∏
                const spheresWithTasks = this.data.spheres.filter(sphere => sphere.tasks > 0);
                
                if (spheresWithTasks.length === 0) {
                    chartContainer.innerHTML = '<p style="text-align: center; color: #888; padding: 20px;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>';
                    return;
                }
                
                // –ù–∞—Ö–æ–¥–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
                const maxTasks = Math.max(...spheresWithTasks.map(sphere => sphere.tasks));
                
                // –°–æ–∑–¥–∞–µ–º —Å—Ç–æ–ª–±—Ü—ã –¥–∏–∞–≥—Ä–∞–º–º—ã
                spheresWithTasks.forEach(sphere => {
                    const barHeight = maxTasks > 0 ? (sphere.tasks / maxTasks * 160) : 10;
                    
                    const barContainer = document.createElement('div');
                    barContainer.style.display = 'flex';
                    barContainer.style.flexDirection = 'column';
                    barContainer.style.alignItems = 'center';
                    barContainer.style.flex = '1';
                    
                    const bar = document.createElement('div');
                    bar.className = 'chart-bar';
                    bar.style.height = `${barHeight}px`;
                    bar.style.backgroundColor = sphere.color;
                    bar.title = `${sphere.name}: ${sphere.tasks} –∑–∞–¥–∞—á`;
                    
                    const label = document.createElement('div');
                    label.className = 'chart-label';
                    label.textContent = sphere.name.length > 10 ? sphere.name.substring(0, 8) + '...' : sphere.name;
                    
                    barContainer.appendChild(bar);
                    barContainer.appendChild(label);
                    chartContainer.appendChild(barContainer);
                });
            },
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
            renderAnalytics() {
                this.renderSphereEfficiency();
                this.renderResponsibleEfficiency();
            },
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ —Å—Ñ–µ—Ä–∞–º
            renderSphereEfficiency() {
                const container = document.getElementById('sphere-efficiency-list');
                container.innerHTML = '';
                
                // –§–∏–ª—å—Ç—Ä—É–µ–º —Å—Ñ–µ—Ä—ã —Å –∑–∞–¥–∞—á–∞–º–∏
                const spheresWithTasks = this.data.spheres.filter(sphere => sphere.tasks > 0);
                
                if (spheresWithTasks.length === 0) {
                    container.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</p>';
                    return;
                }
                
                // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                spheresWithTasks.sort((a, b) => {
                    const rateA = a.tasks > 0 ? (a.completed / a.tasks) * 100 : 0;
                    const rateB = b.tasks > 0 ? (b.completed / b.tasks) * 100 : 0;
                    return rateB - rateA;
                });
                
                // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
                spheresWithTasks.forEach(sphere => {
                    const completionRate = sphere.tasks > 0 ? Math.round((sphere.completed / sphere.tasks) * 100) : 0;
                    
                    const item = document.createElement('div');
                    item.className = 'sphere-list-item';
                    item.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="sphere-color" style="background-color: ${sphere.color}"></div>
                            <div>
                                <div style="font-weight: 600;">${sphere.name}</div>
                                <div style="font-size: 12px; color: #888;">${sphere.completed}/${sphere.tasks} –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                            </div>
                        </div>
                        <div style="font-weight: 700; color: ${completionRate >= 80 ? '#4CAF50' : completionRate >= 50 ? '#FF9800' : '#f44336'}">
                            ${completionRate}%
                        </div>
                    `;
                    container.appendChild(item);
                });
            },
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º
            renderResponsibleEfficiency() {
                const container = document.getElementById('responsible-efficiency-list');
                container.innerHTML = '';
                
                // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∑–∞–¥–∞—á –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º
                const responsibleMap = {};
                this.data.tasks.forEach(task => {
                    if (!responsibleMap[task.responsible]) {
                        responsibleMap[task.responsible] = {
                            total: 0,
                            completed: 0
                        };
                    }
                    responsibleMap[task.responsible].total++;
                    if (task.completed) {
                        responsibleMap[task.responsible].completed++;
                    }
                });
                
                if (Object.keys(responsibleMap).length === 0) {
                    container.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</p>';
                    return;
                }
                
                // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                const sortedResponsibles = Object.entries(responsibleMap)
                    .sort((a, b) => {
                        const rateA = a[1].total > 0 ? (a[1].completed / a[1].total) * 100 : 0;
                        const rateB = b[1].total > 0 ? (b[1].completed / b[1].total) * 100 : 0;
                        return rateB - rateA;
                    });
                
                // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
                sortedResponsibles.forEach(([name, stats]) => {
                    const completionRate = stats.total > 0 ? Math.round((stats.completed / stats.total) * 100) : 0;
                    
                    const item = document.createElement('div');
                    item.className = 'sphere-list-item';
                    item.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="responsible-avatar">${name.charAt(0).toUpperCase()}</div>
                            <div>
                                <div style="font-weight: 600;">${name}</div>
                                <div style="font-size: 12px; color: #888;">${stats.completed}/${stats.total} –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                            </div>
                        </div>
                        <div style="font-weight: 700; color: ${completionRate >= 80 ? '#4CAF50' : completionRate >= 50 ? '#FF9800' : '#f44336'}">
                            ${completionRate}%
                        </div>
                    `;
                    container.appendChild(item);
                });
            },
            
            // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ JSON —Ñ–∞–π–ª
            downloadData(isBackup = false) {
                const dataStr = JSON.stringify(this.data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = isBackup 
                    ? `devyatov-backup-${new Date().toISOString().split('T')[0]}.json`
                    : 'devyatov-data.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showNotification(
                    isBackup ? "–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞" : "–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª",
                    "success"
                );
            },
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–∞
            uploadData(file) {
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const uploadedData = JSON.parse(e.target.result);
                        
                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
                        if (!uploadedData.tasks || !uploadedData.spheres) {
                            throw new Error("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞");
                        }
                        
                        // –ó–∞–º–µ–Ω–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
                        this.data.tasks = uploadedData.tasks;
                        this.data.spheres = uploadedData.spheres;
                        this.data.lastUpdate = uploadedData.lastUpdate || new Date().toISOString();
                        
                        this.saveData();
                        this.renderAll();
                        this.showNotification("–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã", "success");
                    } catch (error) {
                        console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:", error);
                        this.showNotification("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç.", "error");
                    }
                };
                reader.readAsText(file);
                
                // –°–±—Ä–æ—Å input
                document.getElementById('file-input').value = '';
            },
            
            // –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel (CSV –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã)
            exportToExcel() {
                if (this.data.tasks.length === 0) {
                    this.showNotification("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞", "warning");
                    return;
                }
                
                // –°–æ–∑–¥–∞–Ω–∏–µ CSV
                let csv = "ID;–ù–∞–∑–≤–∞–Ω–∏–µ;–û–ø–∏—Å–∞–Ω–∏–µ;–°—Ñ–µ—Ä–∞;–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π;–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç;–°—Ä–æ–∫;–°—Ç–∞—Ç—É—Å;–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è\n";
                
                this.data.tasks.forEach(task => {
                    const sphere = this.data.spheres.find(s => s.id === task.sphereId);
                    const sphereName = sphere ? sphere.name : '–ë–µ–∑ —Å—Ñ–µ—Ä—ã';
                    const status = task.completed ? '–í—ã–ø–æ–ª–Ω–µ–Ω–æ' : '–í —Ä–∞–±–æ—Ç–µ';
                    const createdAt = new Date(task.createdAt).toLocaleDateString('ru-RU');
                    const deadline = new Date(task.deadline).toLocaleDateString('ru-RU');
                    
                    // –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–≤—ã—á–µ–∫ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
                    const title = `"${task.title.replace(/"/g, '""')}"`;
                    const description = `"${task.description ? task.description.replace(/"/g, '""') : ''}"`;
                    
                    csv += `${task.id};${title};${description};${sphereName};${task.responsible};${task.priority};${deadline};${status};${createdAt}\n`;
                });
                
                // –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
                const blob = new Blob(["\uFEFF" + csv], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `devyatov-tasks-${new Date().toISOString().split('T')[0]}.csv`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showNotification("–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ CSV —Ñ–∞–π–ª", "success");
            },
            
            // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
            clearAllData() {
                this.data.tasks = [];
                this.data.spheres = [];
                this.data.lastUpdate = new Date().toISOString();
                this.saveData();
                this.renderAll();
                this.showNotification("–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã", "warning");
            },
            
            // –°–±—Ä–æ—Å –∫ –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º
            resetToDefault() {
                this.data.tasks = [];
                this.data.spheres = [
                    { id: 1, name: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥", color: "#4CAF50", tasks: 0, completed: 0 },
                    { id: 2, name: "–ü—Ä–æ–¥–∞–∂–∏", color: "#2196F3", tasks: 0, completed: 0 },
                    { id: 3, name: "–§–∏–Ω–∞–Ω—Å—ã", color: "#FF9800", tasks: 0, completed: 0 },
                    { id: 4, name: "–û–ø–µ—Ä–∞—Ü–∏–∏", color: "#9C27B0", tasks: 0, completed: 0 },
                    { id: 5, name: "IT", color: "#3F51B5", tasks: 0, completed: 0 },
                    { id: 6, name: "HR", color: "#00BCD4", tasks: 0, completed: 0 },
                    { id: 7, name: "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π", color: "#795548", tasks: 0, completed: 0 },
                    { id: 8, name: "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞", color: "#607D8B", tasks: 0, completed: 0 },
                    { id: 9, name: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞", color: "#FF5722", tasks: 0, completed: 0 },
                    { id: 10, name: "–î–∏–∑–∞–π–Ω", color: "#E91E63", tasks: 0, completed: 0 },
                    { id: 11, name: "–ö–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥", color: "#8BC34A", tasks: 0, completed: 0 }
                ];
                this.data.lastUpdate = new Date().toISOString();
                this.saveData();
                this.renderAll();
                this.showNotification("–î–∞–Ω–Ω—ã–µ —Å–±—Ä–æ—à–µ–Ω—ã –∫ –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º", "success");
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(message, type = "info") {
                const notification = document.getElementById('notification');
                const notificationText = document.getElementById('notification-text');
                
                notificationText.textContent = message;
                notification.className = `notification ${type} show`;
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            DevyatovApp.init();
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –ø–æ–ª–µ –¥–µ–¥–ª–∞–π–Ω–∞
            const today = new Date();
            const nextWeek = new Date(today);
            nextWeek.setDate(today.getDate() + 7);
            document.getElementById('task-deadline').valueAsDate = nextWeek;
        });
    </script>
</body>
</html>